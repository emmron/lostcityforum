---
import MainLayout from "../../layouts/MainLayout.astro";

// Mock member data
const members = [
  {
    id: 1,
    username: "Admin",
    avatar: "/images/avatars/admin.png",
    joinDate: "2024-03-01",
    posts: 87,
    role: "Administrator",
    lastActive: "2024-04-05 15:32"
  },
  {
    id: 2,
    username: "Moderator",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-03-02",
    posts: 54,
    role: "Moderator",
    lastActive: "2024-04-04 11:23"
  },
  {
    id: 3,
    username: "OldschoolPlayer",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-03-05",
    posts: 32,
    role: "Member",
    lastActive: "2024-04-04 19:45"
  },
  {
    id: 4,
    username: "QuestMaster",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-03-08",
    posts: 29,
    role: "Member",
    lastActive: "2024-03-28 14:23"
  },
  {
    id: 5,
    username: "EventCoordinator",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-03-10",
    posts: 26,
    role: "Member",
    lastActive: "2024-04-03 21:18"
  },
  {
    id: 6,
    username: "NewPlayer2004",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-04-01",
    posts: 15,
    role: "Member",
    lastActive: "2024-04-05 08:12"
  },
  {
    id: 7,
    username: "Nostalgic2004",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-03-15",
    posts: 23,
    role: "Member",
    lastActive: "2024-04-01 16:54"
  },
  {
    id: 8,
    username: "GamerFromThePast",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-03-20",
    posts: 19,
    role: "Member",
    lastActive: "2024-04-04 22:07"
  },
  {
    id: 9,
    username: "PvPLegend",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-03-25",
    posts: 28,
    role: "Member",
    lastActive: "2024-04-03 21:18"
  },
  {
    id: 10,
    username: "FirstTimer",
    avatar: "/images/avatars/default.png",
    joinDate: "2024-03-27",
    posts: 12,
    role: "Member",
    lastActive: "2024-03-28 14:23"
  }
];

// Sort members by post count (descending)
members.sort((a, b) => b.posts - a.posts);
---

<MainLayout title="Members">
  <div class="breadcrumbs">
    <a href="/">Home</a> &raquo; Members
  </div>

  <div class="page-header">
    <h1>Forum Members</h1>
    <div class="sort-controls">
      <span>Sort by:</span>
      <a href="#" class="active">Posts</a>
      <a href="#">Username</a>
      <a href="#">Join Date</a>
      <a href="#">Last Active</a>
    </div>
  </div>

  <div class="member-search">
    <input type="text" placeholder="Search members..." class="form-control">
    <button class="btn">Search</button>
  </div>

  <div class="members-grid">
    {members.map((member) => (
      <div class="member-card">
        <div class="member-avatar">
          <img src={member.avatar} alt={`${member.username}'s avatar`} />
        </div>
        <div class="member-info">
          <div class="member-name">
            <a href={`/members/${member.id}`}>{member.username}</a>
            {member.role !== "Member" && <span class={`role-badge ${member.role.toLowerCase()}`}>{member.role}</span>}
          </div>
          <div class="member-stats">
            <div><span>Posts:</span> {member.posts}</div>
            <div><span>Joined:</span> {member.joinDate}</div>
            <div><span>Last Active:</span> {member.lastActive}</div>
          </div>
        </div>
      </div>
    ))}
  </div>

  <div class="paginator">
    <a href="#" class="current">1</a>
    <a href="#">2</a>
    <a href="#">3</a>
    <a href="#">Next &raquo;</a>
  </div>

  <style>
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .page-header h1 {
      color: var(--secondary-color);
      margin-bottom: 10px;
    }

    .sort-controls {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
    }

    .sort-controls a {
      color: var(--link-color);
      text-decoration: none;
    }

    .sort-controls a:hover {
      text-decoration: underline;
    }

    .sort-controls a.active {
      font-weight: bold;
      color: var(--link-hover);
    }

    .member-search {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .member-search input {
      flex: 1;
    }

    .members-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .member-card {
      display: flex;
      gap: 15px;
      padding: 15px;
      background-color: var(--forum-topic-bg);
      border: 1px solid var(--border-color);
    }

    .member-avatar img {
      width: 80px;
      height: 80px;
      border: 1px solid var(--border-color);
    }

    .member-info {
      flex: 1;
    }

    .member-name {
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .member-name a {
      font-size: 16px;
      font-weight: bold;
      color: var(--link-color);
      text-decoration: none;
    }

    .member-name a:hover {
      text-decoration: underline;
    }

    .role-badge {
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 3px;
      text-transform: uppercase;
    }

    .role-badge.administrator {
      background-color: var(--primary-color);
      color: white;
    }

    .role-badge.moderator {
      background-color: #006600;
      color: white;
    }

    .member-stats {
      font-size: 13px;
      display: grid;
      gap: 5px;
    }

    .member-stats span {
      font-weight: bold;
      color: #999;
    }

    @media (max-width: 768px) {
      .members-grid {
        grid-template-columns: 1fr;
      }

      .page-header {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</MainLayout>
